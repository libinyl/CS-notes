## 虚拟内存

### 虚拟内存解决了哪些问题,是如何解决的?解决问题的同时带来了什么副作用(需要进一步解决的问题)?

1. **内存容量不够的问题**: 

   **问题**: 如果没有虚拟内存,程序直接使用物理内存.当系统加载的程序超过了物理内存容量就会崩溃.

   **解决方案**: 借助虚拟内存,系统把超过物理内存的虚拟内存空间映射至磁盘.

   **副作用**: 性能问题.磁盘 IO 的性能问题.

2. **地址空间漏洞**:

   **问题**: 如果没有虚拟内存,那么程序线性映射到物理内内存,这样几乎总会留下一块没有使用却小于下一个要加载程序所需的空间的漏洞,无法充分利用物理内内存,资源浪费.

   **解决方案**: 借助虚拟内存,每个程序的虚拟内存把物理内存碎片化,把一整块虚拟地址映射到磁盘上的碎片空间.

3. **程序安全性:**

    **问题**: 如果没有虚拟内存,多个程序可能同时对一个地址进行读写,造成数据错误等问题.

    **解决方案**: 每个程序有独立的虚拟内存,分别把同一个虚拟地址映射到物理内存的不同地址,进而把程序隔离.

    **副作用**: 有些程序需要共享资源,包括一些程序库/多媒体资源等,虚拟内存似乎让程序分隔,无法共享资源.

    **副作用的解决方案**: 把相同的资源映射到同一物理地址.

参考资料  [YouTube: 虚拟内存](https://www.youtube.com/watch?v=59rEMnKWoS4&list=PLiwt1iVUib9s2Uo5BeYmwkDFUh70fJPxX&index=4)